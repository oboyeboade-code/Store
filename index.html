<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="calculator.png" type="image/x-icon">
<title>Calculator</title>
</head>
    <body>
        <h2>Calculator</h2>
        <form id="calculator">
            <table>
                <tr>
                    <td colspan="4"><input value="0" id="inputString" readonly style="width: 100%; box-sizing: border-box;"/></td>
                </tr>
                <tr>
                    <td><button type="button" onclick="appendValue('7')">7</button></td>
                    <td><button type="button" onclick="appendValue('8')">8</button></td>
                    <td><button type="button" onclick="appendValue('9')">9</button></td>
                    <td><button type="button" onclick="appendValue('/')">/</button></td>
                </tr>
                <tr>
                    <td><button type="button" onclick="appendValue('4')">4</button></td>
                    <td><button type="button" onclick="appendValue('5')">5</button></td>
                    <td><button type="button" onclick="appendValue('6')">6</button></td>
                    <td><button type="button" onclick="appendValue('*')">*</button></td>
                </tr>
                <tr>
                    <td><button type="button" onclick="appendValue('1')">1</button></td>
                    <td><button type="button" onclick="appendValue('2')">2</button></td>
                    <td><button type="button" onclick="appendValue('3')">3</button></td>
                    <td><button type="button" onclick="appendValue('-')">-</button></td>
                </tr>
                <tr>
                    <td><button type="button" onclick="appendValue('0')">0</button></td>
                    <td><button type="button" onclick="clearInput()">C</button></td>
                    <td><button type="button" onclick="calculate()">=</button></td>
                    <td><button type="button" onclick="appendValue('+')">+</button></td>
                </tr>
            </table>
        </form>
        <br/>
        <small><b>P.S:</b> OPERATIONS DON'T FOLLOW <strong>BODMAS</strong></small>
        <!-- rest of the code remains the same -->
        <script>
            function appendValue(val) {
                let currentValue = document.getElementById('inputString').value;
                if (currentValue === 'Infinity' || currentValue === '-Infinity' || currentValue === 'NaN') {
                    document.getElementById('inputString').value = val;
                } else if (currentValue === '0' && !isNaN(val)) {
                    document.getElementById('inputString').value = val;
                } else if (['+', '-', '*', '/'].includes(val)) {
                    if (['+', '-', '*', '/'].includes(currentValue.slice(-1))) {
                        document.getElementById('inputString').value = currentValue.slice(0, -1) + val;
                    } else {
                        document.getElementById('inputString').value += val;
                    }
                } else {
                    document.getElementById('inputString').value += val;
                }
            }

            function clearInput() {
                let currentValue = document.getElementById('inputString').value;
                if (currentValue === 'Infinity' || currentValue === 'NaN') {
                    document.getElementById('inputString').value = '0';
                } else if (currentValue.length > 1) {
                    document.getElementById('inputString').value = currentValue.slice(0, -1);
                } else {
                    document.getElementById('inputString').value = '0';
                }
            }

            function calculate() {
                const str = document.getElementById('inputString').value;
                if (['+', '-', '*', '/'].includes(str.slice(-1))) {
                    document.getElementById("inputString").value = '0';
                    return;
                }

                let so = '';
                let kso = '';
                let aim = '';
                for (let i = 0; i < str.length; i++) {
                    const char = str[i];
                    if (['+', '-', '*', '/'].includes(char)) {
                        if (kso === '') {
                            if (str[i] === '-' && so === '') {
                                kso = 0;
                            } else {
                                kso = parseFloat(so);
                            }
                            
                        } else {
                            switch (aim) {
                            case '+':
                                kso += parseFloat(so);
                                break;
                            case '-':
                                kso -= parseFloat(so);
                                break;
                            case '*':
                                kso *= parseFloat(so);
                                break;
                            case '/':
                                kso /= parseFloat(so);
                                break;
                            default:
                                // do nothing
                                break;
                            }
                        }
                        aim = char;
                        so = '';
                    } else {
                    so += char;
                    }
                }
                if (aim === '') {
                    kso = parseFloat(so);
                } else {
                    switch (aim) {
                        case '+':
                            kso += parseFloat(so);
                            break;
                        case '-':
                            kso -= parseFloat(so);
                            break;
                        case '*':
                            kso *= parseFloat(so);
                            break;
                        case '/':
                            kso /= parseFloat(so);
                            break;
                        default:
                            // do nothing
                            break;
                    }
                }
                document.getElementById("inputString").value = kso;
            }
        </script>
    </body>
</html>
